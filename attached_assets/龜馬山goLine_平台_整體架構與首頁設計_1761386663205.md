
# 🏮 龜馬山 goLine 平台 — 整體架構與首頁設計

本文件整合登入架構、權限分流與首頁規劃，提供前端與後端開發依據。

---

## 一、首頁定位與目的
首頁（index.html）作為整個平台的統一入口，用於判斷登入環境並導向對應系統。

---

## 二、首頁主要功能
1. 辨識登入環境（LINE App 內 / 外部瀏覽器）  
2. 依角色顯示不同入口（前台或後台）  
3. 整合三大前台系統與後台管理入口  
4. 顯示登入狀態與角色資訊  

---

## 三、首頁導向邏輯
```
1️⃣ 使用者開啟首頁
2️⃣ 系統判斷是否在 LINE App 內
3️⃣ 若在 LINE App 內 → 使用 LIFF 登入，導向前台（排班 / 簽到 / 神服）
4️⃣ 若在外部瀏覽器 → 顯示「後台登入」按鈕，進行 LINE Login OAuth 流程
```

---

## 四、首頁導向清單

| 功能名稱 | 導向路徑 | 登入方式 | 可見角色 |
|-----------|-----------|-----------|-----------|
| 奉香簽到 | `/checkin/index.html` | LIFF | 全角色 |
| 排班系統 | `/schedule/index.html` | LIFF | 全角色 |
| 神服服務 | `/service/index.html` | LIFF | 全角色 |
| 管理後台（簽到） | `/checkin/admin/index.html` | LINE Login | poweruser↑ |
| 管理後台（排班） | `/schedule/admin/index.html` | LINE Login | poweruser↑ |
| 管理後台（神服） | `/service/admin/index.html` | LINE Login | poweruser↑ |

---

## 五、技術建議

- 使用 `navigator.userAgent` 判斷是否在 LINE App 內  
- LIFF 模式下自動登入並載入使用者資料  
- 外部模式僅顯示管理登入按鈕  
- 管理登入採用 LINE Login OAuth 2.0 流程  
- 頁面支援 RWD 響應式設計  

---

## 六、首頁畫面概念

### 📱 手機（LINE App 內）
- 顯示使用者名稱與角色  
- 三個主功能按鈕（奉香簽到 / 排班系統 / 神服服務）  
- 提示「管理者請使用電腦版登入後台」  

### 💻 桌機（外部瀏覽器）
- 顯示後台登入按鈕  
- 提示一般使用者請於 LINE App 內開啟  

---

## 七、結論
- **LIFF** 為作業入口（排班 / 簽到 / 神服）  
- **LINE Login** 為後台入口（管理 / 匯出 / 設定）  
- **首頁** 負責判斷並導流，是整個 goLine 平台的核心起點。

---

## 八、附註：架構關係簡圖（文字版）

```
使用者角色：
  user / poweruser / admin / superadmin

登入路徑：
  LIFF → 排班系統 / 奉香簽到 / 神服服務
  LINE Login → 各模組後台管理頁

首頁：
  自動判斷登入環境並導向對應入口
```
