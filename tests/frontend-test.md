# 前端功能測試清單

## 🎯 測試目標
確保所有前端功能正常運作，包括權限控制、使用者介面和業務流程。

---

## 1️⃣ 登入與認證測試

### LINE 登入（手機）
- [ ] 開啟 `/login` 頁面
- [ ] 點擊「LINE 登入」按鈕
- [ ] 成功跳轉到 LINE 授權頁面
- [ ] 授權後成功登入並跳轉到首頁
- [ ] 檢查使用者資訊正確顯示

### Email 登入（電腦）
- [ ] 開啟 `/admin/login` 頁面
- [ ] 輸入 Email 和密碼
- [ ] 點擊登入
- [ ] 成功登入並跳轉到管理中心
- [ ] 登出功能正常運作

### 密碼設定流程
- [ ] 第一次用 LINE 登入的管理員
- [ ] 自動跳轉到 `/admin/setup` 密碼設定頁
- [ ] 設定密碼成功
- [ ] 之後可用 Email 登入

---

## 2️⃣ 權限系統測試

### SuperAdmin 權限
登入為 SuperAdmin 後：
- [ ] 可以訪問 `/admin` 管理中心
- [ ] 可以看到「總管理中心」卡片
- [ ] 可以訪問 `/admin/users` 總管理頁面
- [ ] 可以看到所有系統的管理入口
- [ ] 可以編輯所有系統的角色

### checkin admin 權限
登入為 checkin admin 後：
- [ ] 可以訪問 `/admin` 管理中心
- [ ] 可以看到「奉香簽到系統」卡片
- [ ] **不能**看到「總管理中心」卡片
- [ ] 可以訪問 `/checkin/manage` 簽到管理
- [ ] 可以訪問 `/checkin/manage/users` 人員管理
- [ ] **只能**編輯 checkin_role

### 一般 user 權限
登入為一般使用者後：
- [ ] 可以訪問 `/checkin` 簽到頁面
- [ ] **不能**訪問 `/admin` 管理中心
- [ ] **不能**訪問 `/checkin/manage` 管理後台
- [ ] **不能**訪問 `/admin/users` 總管理
- [ ] 嘗試訪問管理頁面會被導向登入頁

---

## 3️⃣ 簽到系統測試

### GPS 定位功能
- [ ] 開啟 `/checkin` 頁面
- [ ] 瀏覽器請求 GPS 定位權限
- [ ] 授權後顯示定位狀態
- [ ] GPS 座標正確顯示（可選）

### QR Code 簽到（user 角色）
- [ ] 輸入正確的 QR Code（如 `PATROL_YUJI`）
- [ ] 點擊簽到
- [ ] **提示：正在獲取 GPS 定位**
- [ ] GPS 定位成功後提交簽到
- [ ] 如果在範圍內：簽到成功，跳轉到成功頁
- [ ] 如果不在範圍內：顯示錯誤訊息「GPS 定位超出允許範圍」

### 免 GPS 簽到（poweruser/admin）
- [ ] 登入為 poweruser 或 admin
- [ ] 輸入 QR Code
- [ ] 點擊簽到
- [ ] **不需要 GPS** 直接簽到成功
- [ ] 跳轉到成功頁面

### 簽到歷史
- [ ] 訪問 `/checkin/history` 頁面
- [ ] 顯示個人簽到記錄
- [ ] 記錄包含：時間、巡邏點、GPS 驗證狀態
- [ ] 記錄按時間排序（最新在上）

### 重複簽到檢查
- [ ] 簽到成功後
- [ ] 在 5 分鐘內再次簽到同一個巡邏點
- [ ] 應顯示「5 分鐘內已簽到過此巡邏點」錯誤

---

## 4️⃣ 總管理中心測試（/admin/users）

### 頁面訪問
- [ ] 只有 SuperAdmin 可以訪問
- [ ] 其他角色訪問會被拒絕

### 使用者列表
- [ ] 顯示所有使用者
- [ ] 顯示使用者頭像、名稱、Email
- [ ] 顯示 SuperAdmin 標記
- [ ] 顯示簽到次數統計

### 系統篩選
- [ ] 點擊「所有使用者」- 顯示全部
- [ ] 點擊「奉香簽到」- 顯示 checkin 系統使用者
- [ ] 點擊「志工排班」- 顯示 schedule 系統使用者
- [ ] 點擊「神務服務」- 顯示 service 系統使用者

### 角色編輯
- [ ] 點擊使用者的「編輯」按鈕
- [ ] 三個下拉選單出現（奉香、排班、神務）
- [ ] 可以分別設定每個系統的角色
- [ ] 角色選項：user, poweruser, admin
- [ ] 點擊「儲存」後成功更新
- [ ] 點擊「取消」後恢復原值

---

## 5️⃣ 奉香人員管理測試（/checkin/manage/users）

### 頁面訪問
- [ ] checkin admin 可以訪問
- [ ] SuperAdmin 可以訪問
- [ ] 一般 user **不能**訪問

### 使用者列表
- [ ] 顯示所有使用者
- [ ] 顯示奉香簽到次數
- [ ] 只顯示 checkin_role 欄位

### 角色編輯
- [ ] 點擊「編輯角色」按鈕
- [ ] 下拉選單顯示：user, poweruser, admin
- [ ] 修改角色後點擊「儲存」
- [ ] 成功更新 checkin_role
- [ ] **不能**修改其他系統的角色

### 角色說明
- [ ] 頁面底部顯示角色說明卡片
- [ ] 說明 user、poweruser、admin 的差異

---

## 6️⃣ 奉香簽到管理測試（/checkin/manage）

### 統計卡片
- [ ] 顯示「今日簽到」統計
- [ ] 顯示「本週簽到」統計
- [ ] 顯示「本月簽到」統計
- [ ] 顯示「活躍人數」統計
- [ ] 統計數字正確更新

### 快速導航
- [ ] 顯示三個導航卡片
- [ ] 點擊「人員管理」跳轉到 `/checkin/manage/users`
- [ ] 點擊「巡邏點管理」跳轉到 `/checkin/manage/points`
- [ ] 點擊「簽到記錄」跳轉到 `/checkin/records`

### 趨勢圖表
- [ ] 顯示最近 7 天簽到趨勢折線圖
- [ ] 圖表數據正確
- [ ] 切換「日/週/月」視圖按鈕

### 巡邏點熱度分布
- [ ] 顯示圓餅圖
- [ ] 各巡邏點簽到次數佔比正確

### 時段分布
- [ ] 顯示長條圖
- [ ] 各時段簽到次數統計正確

### 最近簽到記錄
- [ ] 顯示最近簽到列表
- [ ] 顯示時間、巡邏點、使用者 ID、狀態
- [ ] 點擊「查看全部」跳轉到記錄頁

---

## 7️⃣ 管理中心首頁測試（/admin）

### SuperAdmin 視圖
- [ ] 顯示「總管理中心」卡片（紫色邊框）
- [ ] 顯示「奉香簽到系統」卡片
- [ ] 顯示「排班系統」卡片（即將推出）
- [ ] 顯示「神務服務」卡片（即將推出）

### checkin admin 視圖
- [ ] **不顯示**「總管理中心」卡片
- [ ] 顯示「奉香簽到系統」卡片
- [ ] 可點擊進入簽到管理

### 卡片功能
- [ ] 點擊卡片可進入對應系統
- [ ] hover 效果正常（陰影變化）
- [ ] active 效果正常（按下效果）

---

## 8️⃣ 響應式設計測試

### 手機版（<768px）
- [ ] 導航選單正常顯示
- [ ] 卡片垂直排列
- [ ] 表格可橫向滾動
- [ ] 按鈕大小適中，易於點擊
- [ ] 文字大小可讀

### 平板版（768px-1024px）
- [ ] 卡片 2 欄排列
- [ ] 表格正常顯示
- [ ] 側邊欄（如有）正常收合

### 桌面版（>1024px）
- [ ] 卡片 3 欄排列
- [ ] 表格完整顯示
- [ ] 所有元素對齊正確

---

## 9️⃣ 錯誤處理測試

### 網路錯誤
- [ ] 斷開網路
- [ ] 執行操作（簽到、儲存等）
- [ ] 顯示友善的錯誤訊息
- [ ] 不會造成頁面崩潰

### Token 過期
- [ ] 等待 Token 過期（約 1 小時）
- [ ] 執行需要認證的操作
- [ ] 自動重新導向到登入頁

### 權限不足
- [ ] 用一般 user 訪問管理頁面
- [ ] 顯示「權限不足」訊息
- [ ] 導向適當頁面

### 資料驗證
- [ ] 輸入無效的 QR Code
- [ ] 顯示錯誤訊息「無效的 QR Code」
- [ ] 不會提交到後端

---

## 🔟 效能測試

### 頁面載入速度
- [ ] 首頁載入時間 < 3 秒
- [ ] 管理頁面載入時間 < 3 秒
- [ ] 圖表渲染流暢

### 操作響應
- [ ] 點擊按鈕反應迅速（< 500ms）
- [ ] 表單提交有載入指示器
- [ ] 無明顯卡頓

---

## 📋 測試完成檢查表

- [ ] 所有基本功能正常運作
- [ ] 權限控制正確
- [ ] 無 Console 錯誤
- [ ] 無 UI 破版
- [ ] 響應式設計正常
- [ ] 錯誤處理完善
- [ ] 效能符合預期

---

## 📝 測試報告範本

```
測試日期：2025-10-24
測試環境：[開發環境 / 正式環境]
測試者：[姓名]

通過項目：____ / ____
失敗項目：____ 項

主要問題：
1. [描述問題]
2. [描述問題]

建議改進：
1. [建議]
2. [建議]

整體評價：[優秀 / 良好 / 需改進]
```
